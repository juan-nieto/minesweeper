(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{10:function(t,e,n){t.exports=n(16)},15:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n.n(a),r=n(8),i=n.n(r),o=(n(15),n(9)),l=n(2),c=n(3),u=n(1),h=n(5),d=n(4),v=(n(7),"hidden"),m="shown",f=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).state={clicked:!1,flag:!1},a.handleCellClicked=a.handleCellClicked.bind(Object(u.a)(a)),a.handleRightClick=a.handleRightClick.bind(Object(u.a)(a)),a}return Object(c.a)(n,[{key:"handleCellClicked",value:function(t){t.target;var e=this.props,n=e.row,a=e.column,s=e.state,r=(e.mine,e.count,e.clickedCell),i=this.state,o=i.clicked,l=i.flag;console.log("I was clicked in r,c:"+n+","+a),l||this.setState({clicked:!0}),"undefined"!==typeof s&&s!==v&&(console.log("This cell is already shown, set as clicked"),o=!0,this.setState({clicked:!0})),console.log("clicked state is: "+this.state.clicked+" clicked var is: "+o),o||r(n,a)}},{key:"handleRightClick",value:function(t){t.preventDefault();var e=this.props,n=e.row,a=e.column,s=e.rightClickedCell,r=e.state,i=this.state,o=i.clicked,l=i.flag;o||r!==m&&(l?this.setState({flag:!1}):this.setState({flag:!0}),s(n,a))}},{key:"render",value:function(){var t=this.props,e=t.row,n=t.column,a=t.state,r=t.mine,i=t.count,o=(t.clickedCell,t.rightClickedCell,this.state.flag&&a===v?"marked":""),l=r?"mine":"",c=i.toString();return s.a.createElement("td",{id:"".concat(e,"_").concat(n),className:"".concat(l," ").concat(o," ").concat(a," _").concat(c),onClick:this.handleCellClicked.bind(this),onContextMenu:this.handleRightClick.bind(this)},a===m?i:"")}}]),n}(a.Component),k=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).state=a.initialState={elapsedTime:0,initTime:0},a.start=a.start.bind(Object(u.a)(a)),a}return Object(c.a)(n,[{key:"start",value:function(){var t=this;this.setState((function(e){var n=Date.now()-t.state.elapsedTime;t.timer=setInterval((function(){t.setState({elapsedTime:Date.now()-n})}))}))}},{key:"render",value:function(){var t=this.state.elapsedTime,e=Math.floor(t/1e3).toString(),n=Math.floor(e%60).toString(),a=Math.floor(t/6e4).toString();return s.a.createElement("div",{id:"timer-wrapper"},s.a.createElement("p",null,a,"m:",n,"s"),s.a.createElement("button",{id:"timer-start-button",className:"timer-button",onClick:this.start}," Start"))}}]),n}(a.Component);var g=function(){return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("h1",null,"Minesweeper"),s.a.createElement(k,null),s.a.createElement(b,{nRows:"10",nCols:"10",nMines:"8"}),s.a.createElement("p",null,"Remaining mines: 8")))},p="hidden",w="shown",C="marked",b=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(t){var a;Object(l.a)(this,n);return(a=e.call(this,t)).state={nCols:10,nRows:10,nMines:8,nmarked:0,nuncovered:0,exploded:!1,arr:a.array2d(10,10,(function(){return{mine:!1,state:p,count:0}}))},a.uncover=a.uncover.bind(Object(u.a)(a)),a}return Object(c.a)(n,[{key:"array2d",value:function(t,e,n){for(var a=[],s=0;s<t;s++){a[s]=[];for(var r=0;r<e;r++)a[s][r]=n(s,r)}return a}},{key:"rndInt",value:function(t,e){var n=[Math.ceil(t),Math.floor(e)];return e=n[1],(t=n[0])+Math.floor(Math.random()*(e-t+1))}},{key:"validCoord",value:function(t,e){return t>=0&&t<this.state.nRows&&e>=0&&e<this.state.nCols}},{key:"count",value:function(t,e){for(var n,a,s=this,r=0,i=-1;i<=1;i++)for(var o=-1;o<=1;o++)r+=(n=t+i,a=e+o,s.validCoord(n,a)&&s.state.arr[n][a].mine?1:0);return r}},{key:"sprinkleMines",value:function(t,e){for(var n=[],a=0;a<this.state.nRows;a++)for(var s=0;s<this.state.nCols;s++)(Math.abs(t-a)>2||Math.abs(e-s)>2)&&n.push([a,s]);this.state.nMines=Math.min(this.state.nMines,n.length);for(var r=0;r<this.state.nMines;r++){var i=this.rndInt(r,n.length-1),l=[n[i],n[r]];n[r]=l[0],n[i]=l[1];var c=Object(o.a)(n[r],2),u=c[0],h=c[1];this.state.arr[u][h].mine=!0,console.log("mine here:  r,c:"+u+","+h+" "+this.state.arr[u][h].mine)}for(var d=0;d<this.state.nRows;d++)for(var v=0;v<this.state.nCols;v++)this.state.arr[d][v].state==C&&(this.state.arr[d][v].state=p),this.state.arr[d][v].count=this.count(d,v);for(var m=[],f=0;f<this.state.nRows;f++){for(var k="",g=0;g<this.state.nCols;g++)k+=this.state.arr[f][g].mine?"B":".";k+="  |  ";for(var w=0;w<this.state.nCols;w++)k+=this.state.arr[f][w].count.toString();m[f]=k}var b=this.state.arr.map((function(t){return t.slice()}));this.setState({arr:b}),console.log("Mines and counts after sprinkling:"),console.log(m.join("\n"),"\n")}},{key:"uncover",value:function(t,e){var n=this;if(console.log("uncover",t,e),!this.validCoord(t,e))return console.log("Requested coordinates ("+t+", "+e+") were invalid."),!1;var a=this.state.nuncovered;if(console.log("beginning uncover method with nuncovered: "+this.state.nuncovered+" with var: "+a),0===this.state.nuncovered&&(console.log("populating with mines at: "+t+", "+e),this.sprinkleMines(t,e)),"undefined"!==typeof this.state.arr[t][e].state&&(console.log("state of this cell is not undefined, it's: "+this.state.arr[t][e].state),this.state.arr[t][e].state!==p))return!1;var s=this.state.arr.map((function(t){return t.slice()})),r=this.state.nuncovered;!function t(e,a,s,r){n.validCoord(e,a)&&("undefined"!==typeof s[e][a].state&&s[e][a].state!==p||(s[e][a].state=w,r++,n.state.nuncovered=r,n.setState({nuncovered:r},(function(){console.log("updated nuncovered state in ff: "+n.state.nuncovered)})),0===s[e][a].count&&(t(e-1,a-1,s,r),t(e-1,a,s,r),t(e-1,a+1,s,r),t(e,a-1,s,r),t(e,a+1,s,r),t(e+1,a-1,s,r),t(e+1,a,s,r),t(e+1,a+1,s,r))))}(t,e,s,r),this.setState({arr:s},(function(){})),this.setState({nuncovered:this.state.nuncovered},(function(){console.log("updated nuncovered state AFTER ff: "+n.state.nuncovered)}));var i=!1;if(this.state.arr[t][e].mine&&(console.log("Mine at "+t+", "+e+" was hit"),this.state.exploded=!0,i=!0,alert("You lost"),window.location.reload(!0)),!i){for(var o=0,l=0;l<this.state.arr.length;l++)for(var c=0;c<this.state.arr.length;c++)this.state.arr[l][c].state===p&&o++;o===this.state.nMines&&(alert("You win!"),window.location.reload(!0))}return console.log("nuncovered state value: "+this.state.nuncovered+" , uncoveredUpdated temp var: "+r),!0}},{key:"mark",value:function(t,e){return console.log("mark",t,e),!!this.validCoord(t,e)&&(console.log("marking previous state=",this.state.arr[t][e].state),this.state.arr[t][e].state!==w&&(this.nmarked+=this.state.arr[t][e].state==C?-1:1,this.state.arr[t][e].state=this.state.arr[t][e].state==C?p:C,!0))}},{key:"getRendering",value:function(){for(var t=[],e=0;e<this.state.nRows;e++){for(var n="",a=0;a<this.state.nCols;a++){var s=this.state.arr[e][a];this.exploded&&s.mine?n+="M":s.state===p?n+="H":s.state===C?n+="F":s.mine?n+="M":n+=s.count.toString()}t[e]=n}return t}},{key:"getStatus",value:function(){var t=this.state.exploded||this.state.nuncovered===this.state.nRows*this.state.nCols-this.state.nMines;return t&&alert("You win!"),{done:t,exploded:this.state.exploded,nRows:this.state.nRows,nCols:this.state.nCols,nmarked:this.state.nmarked,nuncovered:this.state.nuncovered,nMines:this.state.nMines}}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{id:"gameboard-container"},s.a.createElement("table",{id:"gameboard-table"},s.a.createElement("tbody",null,this.state.arr.map((function(e,n){return s.a.createElement("tr",{key:n},e.map((function(e,a){return s.a.createElement(f,{key:a,row:n,column:a,state:e.state,mine:e.mine,count:e.count,clickedCell:t.uncover.bind(t),rightClickedCell:t.mark.bind(t)})})))})))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},7:function(t,e,n){}},[[10,1,2]]]);
//# sourceMappingURL=main.df39fc11.chunk.js.map