{"version":3,"sources":["GameCell.js","Timer.js","App.js","serviceWorker.js","index.js"],"names":["privateConstantMap","GameCell","props","state","clicked","flag","handleCellClicked","bind","handleRightClick","target","this","row","column","clickedCell","mine","count","console","log","setState","e","preventDefault","rightClickedCell","flagClass","mineClass","countClass","toString","id","className","onClick","onContextMenu","Component","Timer","initialState","elapsedTime","initTime","start","Date","now","timer","setInterval","totalSeconds","sec","Math","floor","displaySec","min","App","isHardMode","handleToggleClick","col","mines","key","isEasy","totRows","totColumns","totMines","React","Gameboard","nCols","nRows","nMines","nmarked","nuncovered","exploded","arr","array2d","uncover","nrows","ncols","val","res","max","ceil","random","r","c","dr","dc","validCoord","allowed","abs","push","length","i","j","rndInt","s","gameboardArr","map","slice","join","sprinkleMines","uncoveredUpdated","ff","lost","alert","window","location","reload","totalHiddenSquares","a","done","item","subitem","mark","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.76351144.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport './App.css';\r\nimport Gameboard from './App.js';\r\n\r\n\r\ntype Props = {\r\n  row: number,\r\n  column: number,\r\n  state: String,\r\n  mine: Boolean,\r\n  count: number,\r\n  clickedCell: Function,\r\n  rightClickedCell: Function\r\n};\r\n\r\ntype State = {\r\n  clicked: Boolean,\r\n  flag: Boolean\r\n}\r\n// private constants\r\nconst privateConstantMap = {\r\n  STATE_HIDDEN: \"hidden\",\r\n  STATE_SHOWN: \"shown\",\r\n  STATE_MARKED: \"marked\"\r\n};\r\n\r\nclass GameCell extends Component<Props, State> {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { clicked: false, flag: false };\r\n    this.handleCellClicked = this.handleCellClicked.bind(this);\r\n    this.handleRightClick = this.handleRightClick.bind(this);\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  handleCellClicked({ target }: SyntheticMouseEvent<>) {\r\n    let {row, column, state, mine, count, clickedCell} = this.props;\r\n    let {clicked, flag} = this.state;\r\n    console.log(\"I was clicked in r,c:\" + row + \",\" + column);\r\n    //If there is no flag on this cell, set clicked to true\r\n    if(!flag) {\r\n      //clicked = true;\r\n      this.setState({clicked: true});\r\n    }\r\n    \r\n    if(typeof state !== 'undefined') {\r\n      if(state !== privateConstantMap.STATE_HIDDEN) {\r\n        console.log(\"This cell is already shown, set as clicked\");\r\n        clicked = true;\r\n        this.setState({clicked: true});\r\n        //return;\r\n      }\r\n    }\r\n    \r\n    //If it hasn't been clicked before, call uncover method from Gameboard\r\n    console.log(\"clicked state is: \" + this.state.clicked + \" clicked var is: \" + clicked);\r\n    if(!clicked) {\r\n      clickedCell(row, column);\r\n    }\r\n\r\n  }\r\n\r\n  handleRightClick(e: SyntheticMouseEvent<>) {\r\n    e.preventDefault();\r\n    let {row, column, rightClickedCell, state} = this.props;\r\n    let {clicked, flag} = this.state;\r\n    if(!clicked) {\r\n      if(state !== privateConstantMap.STATE_SHOWN) {\r\n        if(flag) {\r\n          this.setState({flag: false});\r\n        } else {\r\n          this.setState({flag: true});\r\n        }\r\n        rightClickedCell(row, column);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let {row, column, state, mine, count, clickedCell, rightClickedCell} = this.props;\r\n    let {flag} = this.state;\r\n    const flagClass = (flag && state === privateConstantMap.STATE_HIDDEN) ? 'marked' : ''\r\n    const mineClass =  mine ? 'mine' : ''\r\n    const countClass = count.toString();\r\n    //const stateClass = (state=== 'hidden') ? ''\r\n    return(\r\n      <td id={`${row}_${column}`}\r\n        className={`${mineClass} ${flagClass} ${state} _${countClass}`}\r\n        onClick={this.handleCellClicked.bind(this)}\r\n        onContextMenu={this.handleRightClick.bind(this)}\r\n        >\r\n          {(state === privateConstantMap.STATE_SHOWN) ? count : ''}\r\n      </td>\r\n    );\r\n  }\r\n\r\n\r\n} export default GameCell;\r\n","import React, {Component} from 'react';\r\n\r\nclass Timer extends Component<State> {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = this.initialState = {\r\n            elapsedTime: 0,\r\n            initTime: 0\r\n        };\r\n        this.start = this.start.bind(this);\r\n    }\r\n\r\n    /**\r\n     *  This method gets called when the start button gets clicked and begins\r\n     *  the timer. \r\n     */\r\n    start() {\r\n        this.setState(state => {\r\n            const initTime = Date.now() - this.state.elapsedTime;\r\n            this.timer = setInterval(() =>  {\r\n                this.setState({elapsedTime: Date.now() - initTime});\r\n            });\r\n       });\r\n    }\r\n\r\n    render() {\r\n        const totalSeconds = this.state.elapsedTime;\r\n        const sec = Math.floor(totalSeconds / 1000).toString();\r\n        const displaySec = Math.floor(sec % 60).toString();\r\n        const min = Math.floor(totalSeconds /60000).toString();\r\n    \r\n        return( \r\n        <div id=\"timer-wrapper\">\r\n            <p>{min}m:{displaySec}s</p>\r\n            <button id=\"timer-start-button\" className=\"timer-button\" onClick={this.start}> Start</button>\r\n        </div>\r\n        );\r\n\r\n    }\r\n} export default Timer;","import React, {Component} from 'react';\r\nimport './App.css';\r\nimport GameCell from './GameCell';\r\nimport Timer from './Timer'\r\nimport { useState } from 'react';\r\n\r\nclass App extends React.Component{\r\n\r\n  state = {\r\n    isHardMode: false\r\n  }\r\n  constructor(props){\r\n    super(props);\r\n    // this.state = {\r\n    //   isHardMode: false\r\n    // }\r\n    this.handleToggleClick = this.handleToggleClick.bind(this);\r\n  }\r\n\r\n  handleToggleClick() {\r\n   // let isHardmode = this.state.isHardMode;\r\n    if(this.state.isHardMode) {\r\n      console.log(\"Setting state: \" + this.state.isHardMode);\r\n      this.setState({isHardMode: false});\r\n    } else {\r\n      console.log(\"Else Setting state: \" + this.state.isHardMode);\r\n      this.setState({isHardMode: true});\r\n    }\r\n  }\r\n  \r\n  render() {\r\n    let {isHardMode} = this.state;\r\n    let col, row, mines;\r\n\r\n    if(isHardMode) {\r\n      console.log(\"Creating minesweeper with difficulty mode: \" + isHardMode);\r\n      col = 10;\r\n      row = 10;\r\n      mines = 8;\r\n    } else {\r\n      console.log(\"Creating minesweeper with difficulty mode: \" + isHardMode);\r\n      col = 18;\r\n      row = 18;\r\n      mines = 40;\r\n    }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <h1>Minesweeper</h1>\r\n        <Timer/>       \r\n        <Gameboard key={isHardMode} isEasy={isHardMode} totRows={row} totColumns={col} totMines={mines}/>\r\n        \r\n        <button id=\"toggle-difficuly-button\" className=\"difficulty-button\"\r\n          onClick={this.handleToggleClick}  > {isHardMode? 'Hard Mode' : 'Easy Mode'}\r\n        </button>      \r\n        <p>Remaining mines: {mines}</p>\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n} export default App;\r\n\r\n\r\n// private constants\r\nconst privateConstantMap = {\r\n  STATE_HIDDEN: \"hidden\",\r\n  STATE_SHOWN: \"shown\",\r\n  STATE_MARKED: \"marked\"\r\n};\r\n\r\ntype Props = {\r\n  isEasy: Boolean,\r\n  totColumns: number,\r\n  totRows: number,\r\n  totMines: number,\r\n  toggleDifficulty: Function\r\n};\r\ntype State = {\r\n  nCols: number,\r\n  nRows: number,\r\n  nMines: number,\r\n  nmarked: number,\r\n  nuncovered: number,\r\n  exploded: Boolean,\r\n  arr: Array<Array<>>\r\n};\r\n/**\r\n * Gameboard is the grid composed of a 2D array that represents\r\n * the minesweeper UI\r\n */\r\nexport class Gameboard extends Component<State, Props> {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    let {totColumns, totRows, totMines, isEasy} = this.props;\r\n    console.log(\"Constructing with totalCOlumns = \" + totColumns);\r\n    let nCols = totColumns;\r\n    let nRows = totRows;\r\n    let nMines = totMines;\r\n    let nmarked = 0;\r\n    let nuncovered = 0;\r\n    let exploded = false;\r\n\r\n    this.state = {\r\n      nCols,\r\n      nRows,\r\n      nMines,\r\n      nmarked,\r\n      nuncovered,\r\n      exploded,\r\n      arr: this.array2d(nRows, nCols,\r\n        () => ({mine: false, state: privateConstantMap.STATE_HIDDEN, count: 0}))\r\n    };\r\n    this.uncover = this.uncover.bind(this);\r\n  }\r\n\r\n  /**\r\n   * 2D array representing the gameboard\r\n   * @param {*} nrows \r\n   * @param {*} ncols \r\n   * @param {*} val \r\n   */\r\n  array2d( nrows, ncols, val) {\r\n    const res = [];\r\n    for( let row = 0 ; row < nrows ; row ++) {\r\n      res[row] = [];\r\n      for( let col = 0 ; col < ncols ; col ++)\r\n        res[row][col] = val(row,col);\r\n    }\r\n\r\n    return res;\r\n  }\r\n\r\n  // returns random integer in range [min, max]\r\n  rndInt(min, max) {\r\n    [min,max] = [Math.ceil(min), Math.floor(max)]\r\n    return min + Math.floor(Math.random() * (max - min + 1));\r\n  }\r\n\r\n  validCoord(row, col) {\r\n    return row >= 0 && row < this.state.nRows && col >= 0 && col < this.state.nCols;\r\n  }\r\n\r\n  count(row,col) {\r\n    const c = (r,c) =>\r\n          (this.validCoord(r,c) && this.state.arr[r][c].mine ? 1 : 0);\r\n    let res = 0;\r\n    for( let dr = -1 ; dr <= 1 ; dr ++ )\r\n      for( let dc = -1 ; dc <= 1 ; dc ++ )\r\n        res += c(row+dr,col+dc);\r\n    return res;\r\n  }\r\n\r\n  sprinkleMines(row, col) {\r\n    // prepare a list of allowed coordinates for mine placement\r\n    let allowed = [];\r\n    for(let r = 0 ; r < this.state.nRows ; r ++ ) {\r\n      for( let c = 0 ; c < this.state.nCols ; c ++ ) {\r\n        if(Math.abs(row-r) > 2 || Math.abs(col-c) > 2)\r\n          allowed.push([r,c]);\r\n      }\r\n    }\r\n   \r\n    this.state.nMines = Math.min(this.state.nMines, allowed.length);\r\n    for( let i = 0 ; i < this.state.nMines ; i ++ ) {\r\n      let j = this.rndInt(i, allowed.length-1);\r\n      [allowed[i], allowed[j]] = [allowed[j], allowed[i]];\r\n      let [r,c] = allowed[i];\r\n      this.state.arr[r][c].mine = true;\r\n      console.log(\"mine here: \" + \" r,c:\" + r + \",\" + c + \" \" + this.state.arr[r][c].mine);\r\n    }\r\n    // erase any marks (in case user placed them) and update counts\r\n    for(let r = 0 ; r < this.state.nRows ; r ++ ) {\r\n      for( let c = 0 ; c < this.state.nCols ; c ++ ) {\r\n        if(this.state.arr[r][c].state == privateConstantMap.STATE_MARKED) {\r\n          this.state.arr[r][c].state = privateConstantMap.STATE_HIDDEN; \r\n        }\r\n        this.state.arr[r][c].count = this.count(r,c);\r\n      }\r\n    }\r\n    let mines = []; let counts = [];\r\n    for(let row = 0 ; row < this.state.nRows ; row ++ ) {\r\n      let s = \"\";\r\n      for( let col = 0 ; col < this.state.nCols ; col ++ ) {\r\n        s += this.state.arr[row][col].mine ? \"B\" : \".\";\r\n      }\r\n      s += \"  |  \";\r\n      for( let col = 0 ; col < this.state.nCols ; col ++ ) {\r\n        s += this.state.arr[row][col].count.toString();\r\n      }\r\n      mines[row] = s;\r\n    }\r\n    let gameboardArr = this.state.arr.map(function(arr) {\r\n      return arr.slice();\r\n    });\r\n    this.setState({arr: gameboardArr});\r\n\r\n    console.log(\"Mines and counts after sprinkling:\");\r\n    console.log(mines.join(\"\\n\"), \"\\n\");\r\n  }\r\n\r\n  // uncovers a cell at a given coordinate\r\n  // this is the 'left-click' functionality\r\n  uncover(row, col) {\r\n    console.log(\"uncover\", row, col);\r\n    // if coordinates invalid, refuse this request\r\n    if( ! this.validCoord(row,col)) {\r\n      console.log(\"Requested coordinates (\" + row + \", \"+ col + \") were invalid.\");\r\n      return false; \r\n    }\r\n    let nuncovered = this.state.nuncovered;\r\n    console.log(\"beginning uncover method with nuncovered: \" + this.state.nuncovered\r\n    + \" with var: \" + nuncovered);\r\n\r\n    // if this is the very first move, populate the mines, but make\r\n    // sure the current cell does not get a mine\r\n    if( this.state.nuncovered === 0) {\r\n      console.log(\"populating with mines at: \" + row + \", \" + col);\r\n      this.sprinkleMines(row, col);\r\n    }\r\n    // if cell is not hidden, ignore this move\r\n    //this.state.arr[row][col].state !== privateConstantMap.STATE_HIDDEN //prev if statement\r\n    if( typeof this.state.arr[row][col].state !== 'undefined') {\r\n      console.log(\"state of this cell is not undefined, it's: \" + this.state.arr[row][col].state);\r\n      if(this.state.arr[row][col].state !== privateConstantMap.STATE_HIDDEN) {\r\n        return false; //STATE_HIDDEN\r\n      }\r\n    }\r\n    let gameboardArr = this.state.arr.map(function(arr) {\r\n      return arr.slice();\r\n    });\r\n\r\n    let uncoveredUpdated = this.state.nuncovered;\r\n    //floodfill all 0-count cells\r\n    const ff = (r, c, gameboardArr, uncoveredUpdated) => {\r\n      if(!this.validCoord(r,c)) {\r\n        return;\r\n      }\r\n      \r\n      if(typeof gameboardArr[r][c].state !== 'undefined'){ \r\n        if(gameboardArr[r][c].state !== privateConstantMap.STATE_HIDDEN) {\r\n          return; \r\n        }\r\n      }\r\n      gameboardArr[r][c].state = privateConstantMap.STATE_SHOWN;\r\n      uncoveredUpdated++;\r\n      this.state.nuncovered = uncoveredUpdated;\r\n      this.setState({nuncovered: uncoveredUpdated}, () => {\r\n       console.log(\"updated nuncovered state in ff: \" + this.state.nuncovered);\r\n      });\r\n      \r\n      if(gameboardArr[r][c].count !== 0) {\r\n        return;\r\n      }\r\n      ff(r-1,c-1, gameboardArr, uncoveredUpdated);ff(r-1,c, gameboardArr, uncoveredUpdated);ff(r-1,c+1, gameboardArr, uncoveredUpdated);\r\n      ff(r  ,c-1, gameboardArr, uncoveredUpdated);         ;ff(r  ,c+1, gameboardArr, uncoveredUpdated);\r\n      ff(r+1,c-1, gameboardArr, uncoveredUpdated);ff(r+1,c, gameboardArr, uncoveredUpdated);ff(r+1,c+1, gameboardArr, uncoveredUpdated);\r\n    };\r\n    ff(row,col, gameboardArr, uncoveredUpdated);\r\n  \r\n    this.setState({arr: gameboardArr}, () => {\r\n    });\r\n    \r\n    this.setState({nuncovered: this.state.nuncovered}, () => {\r\n      console.log(\"updated nuncovered state AFTER ff: \" + this.state.nuncovered);\r\n    });   \r\n    // have we hit a mine?\r\n    let lost = false;\r\n    if(this.state.arr[row][col].mine) {\r\n      console.log(\"Mine at \" + row + \", \" + col + \" was hit\");\r\n      this.state.exploded = true;\r\n      lost = true;\r\n      alert(\"You lost\");\r\n      window.location.reload(true);\r\n    }\r\n    if(!lost) {\r\n      let totalHiddenSquares = 0;\r\n      for(let i = 0; i < this.state.arr.length; i++) {\r\n        for(let j = 0; j < this.state.arr.length; j++) {\r\n          if(this.state.arr[i][j].state === privateConstantMap.STATE_HIDDEN\r\n              || this.state.arr[i][j].state === privateConstantMap.STATE_MARKED) {\r\n            totalHiddenSquares++;\r\n            //console.log(\"Hidden Squares remaining: \" + totalHiddenSquares);\r\n          }\r\n        }\r\n      }\r\n      if(totalHiddenSquares === this.state.nMines) {\r\n        alert(\"You win!\");\r\n        window.location.reload(true);\r\n      }\r\n    }\r\n    \r\n    console.log(\"nuncovered state value: \" + this.state.nuncovered + \" , uncoveredUpdated temp var: \" + uncoveredUpdated);\r\n    return true;\r\n  }\r\n\r\n  // puts a flag on a cell\r\n  // this is the 'right-click' or 'long-tap' functionality\r\n  mark(row, col) {\r\n    console.log(\"mark\", row, col);\r\n    // if coordinates invalid, refuse this request\r\n    if( ! this.validCoord(row,col)){\r\n      return false;\r\n    }\r\n    // if cell already uncovered, refuse this\r\n    console.log(\"marking previous state=\", this.state.arr[row][col].state);\r\n    if( this.state.arr[row][col].state === privateConstantMap.STATE_SHOWN) return false; //STATE_SHOWN\r\n    // accept the move and flip the marked status\r\n    this.nmarked += this.state.arr[row][col].state == privateConstantMap.STATE_MARKED ? -1 : 1;\r\n    this.state.arr[row][col].state = this.state.arr[row][col].state == privateConstantMap.STATE_MARKED ? \r\n    privateConstantMap.STATE_HIDDEN : privateConstantMap.STATE_MARKED; //STATE_HIDDEN:STATE_MARKED\r\n    return true;\r\n  }\r\n\r\n\r\n  // returns array of strings representing the rendering of the board\r\n  //      \"H\" = hidden cell - no bomb\r\n  //      \"F\" = hidden cell with a mark / flag\r\n  //      \"M\" = uncovered mine (game should be over now)\r\n  // '0'..'9' = number of mines in adjacent cells\r\n  getRendering() {\r\n    const res = [];\r\n    for( let row = 0 ; row < this.state.nRows ; row ++) {\r\n      let s = \"\";\r\n      for( let col = 0 ; col < this.state.nCols ; col ++ ) {\r\n        let a = this.state.arr[row][col];\r\n        if( this.exploded && a.mine) s += \"M\";\r\n        else if( a.state === privateConstantMap.STATE_HIDDEN) s += \"H\"; //statehidden\r\n        else if( a.state === privateConstantMap.STATE_MARKED) s += \"F\"; //state marked\r\n        else if( a.mine) s += \"M\";\r\n        else s += a.count.toString();\r\n      }\r\n      res[row] = s;\r\n    }\r\n    return res;\r\n  }\r\n\r\n  getStatus() {\r\n    let done = this.state.exploded ||\r\n        this.state.nuncovered === this.state.nRows * this.state.nCols - this.state.nMines;\r\n    if(done) {\r\n      alert(\"You win!\");\r\n    }\r\n    return {\r\n      done: done,\r\n      exploded: this.state.exploded,\r\n      nRows: this.state.nRows,\r\n      nCols: this.state.nCols,\r\n      nmarked: this.state.nmarked,\r\n      nuncovered: this.state.nuncovered,\r\n      nMines: this.state.nMines\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let {isEasy} = this.props;\r\n    return (\r\n      <div id=\"gameboard-container\">\r\n        <table id=\"gameboard-table\">\r\n          <tbody>\r\n            {this.state.arr.map((item, row) => {\r\n              return(\r\n                <tr key={row}>\r\n                  {item.map((subitem, col) => {\r\n                    return (\r\n                      <GameCell \r\n                        key={col}\r\n                        row={row}\r\n                        column={col}\r\n                        state={subitem.state}\r\n                        mine={subitem.mine}\r\n                        count={subitem.count}\r\n                        clickedCell={this.uncover.bind(this)}\r\n                        rightClickedCell={this.mark.bind(this)}\r\n                      >\r\n                      </GameCell>\r\n                    );\r\n                  }\r\n                  )}\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>  \r\n        </table>   \r\n      </div>\r\n    );\r\n  }\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}